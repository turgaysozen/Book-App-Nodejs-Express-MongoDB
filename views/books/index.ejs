<h2>Search Books</h2>
<form action="/books" method="GET">
    <div>
        <label>Title</label>
        <input type="text" name="title" value="<%= searchObject.title%>">
    </div>
    <div>
        <label>Published After</label>
        <input type="date" name="publishedAfter" value="<%= searchObject.publishedAfter%>">
    </div>
    <div>
        <label>Published Before</label>
        <input type="date" name="publishedBefore" value="<%= searchObject.publishedBefore%>">
    </div>
    <button type="submit">Search</button>
</form>
<br>

<%let j = 0;%>
<b><label>Total Author: <%= books.length%></label></b>

<table style="margin-top:10px">
    <tr>
        <th>No</th>
        <th>Title</th>
        <th>Author</th>
        <th>Process</th>
    </tr>


    <% books.forEach(book => { %>
    <%j++;%>
    <tr>
        <div>
            <div class="author-row">
                <td style="width: 5%;"><%=j%></td>
                <div class="author-name">
                    <td><%= book.title%></td>
                </div>
                <td style="width: 25%;">
                    <% authors.forEach(author => { %>
                    <%if(author.id == book.author){%>
                    <%=author.name%>
                    <%}%>
                    <% })%>
                </td>

                <td style="width: 20%;">
                    <div class="btn-row">
                        <a class="btn btn-primary" href="/books/<%= book.id%>">View</a>
                        <a class="btn btn-primary" href="/books/<%= book.id%>/edit">Edit</a>
                        <%- include('../partials/deleteForm', { url: `/books/${ book.id}`})%>
                    </div>
                </td>
            </div>
        </div>
    </tr>
    <%})%>


</table>


<!-- <div>
    <label><b>Total: <%= books.length%> books</b></label><br>
    <%let i = 0;%>
    <% books.forEach(book => { %>
    <%i++%>
    <div class="book-row">
        <center>
            <a href="/books/<%= book.id%>"><%= book.title%>
                <img src="<%= book.coverImagePath%>">
            </a>
            <label>Publish Date: <%=  book.publishDate.toISOString().split('T')[0]%></label>
        </center>
    </div>
    <%})%>
</div> -->